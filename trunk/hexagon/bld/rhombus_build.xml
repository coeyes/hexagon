<?xml version="1.0" encoding="UTF-8"?>
<!--
*********************************************************************************************
	Buildfile for rhombus framework
	Nov 24, 2009
*********************************************************************************************
-->
<project name="rhombus framework" default="Init Project" basedir="..">
	
	<!-- application information -->
	<property name="app.name"			value="rhombus framework"/>
	<property name="app.version"		value="0.2.0"/>
	<property name="app.releasestage"	value="beta"/>
	<property name="app.copyright"	value="Copyright(c) Hexagon Star Softworks"/>
	
	<!-- version of the used flex sdk -->
	<property name="sdk.version"		value="3.4.0"/>
	
	<!-- version of the targetted flash player (9.0.124 or 10.0.12) -->
	<property name="fpv.version"		value="10.0.12"/>
	
	<!-- default project folders -->
	<property name="src"				value="src"/>
	<property name="swc"				value="swc"/>
	<property name="doc"				value="doc"/>
	
	<!-- eclipse workspace & additional source/swc pathes -->
	<property name="workspace"		value="${eclipse.workspace}"/>
	
	<!-- sdk pathes -->
	<property name="sdk"				value="${flex.sdk.basepath}/${sdk.version}"/>
	<property name="FLEX_HOME"		value="${sdk}"/>
	<property name="fcsh"				value="${sdk}/bin/fcsh.exe"/>
	<property name="mxmlc"			value="${sdk}/bin/mxmlc.exe"/>
	<property name="compc"			value="${sdk}/bin/compc.exe"/>
	<property name="asdoc"			value="${sdk}/bin/asdoc.exe"/>
	
	
	<!-- ==================================================================================== -->
	<!-- TARGETS                                                                              -->
	<!-- ==================================================================================== -->
	
	<target name="Init Project" description="Does nothing.">
	</target>
	
	
	<target name="swc" description="Generates the SWC of the rhombus framework.">
		<prepareBuild/>
		<echo message="Generating rhombus framework SWC ..." level="info"/>
		<flextasks.compc
			output="${basedir}/${swc}/rhombus.swc"
			target-player="${fpv.version}"
			debug="false"
			optimize="true"
		>
			<load-config filename="${FLEX_HOME}/frameworks/air-config.xml"/>
			<source-path path-element="${basedir}/${src}/rhombus/framework"/>
			<include-sources dir="${basedir}/${src}/rhombus/framework" includes="**/*.as"/>
		</flextasks.compc>
	</target>
	
	
	<!-- ==================================================================================== -->
	<!-- MACRODEFS                                                                            -->
	<!-- ==================================================================================== -->
	
	<macrodef name="prepareBuild">
		<sequential>
			<buildnumber file="bld/rhombus_build.number"/>
			<tstamp>
				<format property="build.date" pattern="dd-MMMM-yyyy HH:mm" unit="minute" locale="en"/>
			</tstamp>
			<echo message="*** ${ant.project.name} version: ${app.version} build #${build.number}, ${build.date} ***" level="info"/>
		</sequential>
	</macrodef>
	
</project>
